using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace GameConsoles1
{
    internal class Program
    {
        static void Main()
        {
            Calliseum calliseum = new Calliseum();
            calliseum.FightGladiators(calliseum.ChooseGladiator(),calliseum.ChooseGladiator());
        }
    }

    class Calliseum
    {
        private List<Gladiator> _gladiators = new List<Gladiator>() { new Gladiator(), new Samurai(), new Paladin(), new Niga(), new Barbarian()};

        public Gladiator ChooseGladiator()
        {
            Console.WriteLine("Выберете гладиатора");
            string userInput = Console.ReadLine();

            if (int.TryParse(userInput,out int userNumber) && userNumber <= _gladiators.Count)
            {
                for (int i = 0; i < _gladiators.Count; i++)
                {
                    if (i + 1 == userNumber)
                    {
                        return _gladiators[i];
                    }
                }
            }
            else
            {
                Console.WriteLine("Что-то не так");
            }

            return null;
        }

        public void FightGladiators(Gladiator gladiator, Gladiator gladiator2)
        {
            if (gladiator != gladiator2)
            {
                gladiator.UseSpell();
                gladiator2.UseSpell();
                while (gladiator.Health > 0 && gladiator2.Health >0)
                {
                    gladiator.TakeDamege(gladiator2.Damage);
                    gladiator.DisplayInfo();
                    gladiator2.TakeDamege(gladiator.Damage);
                    gladiator2.DisplayInfo();
                }

                if (gladiator.Health == 0 && gladiator2.Health == 0)
                {
                    Console.WriteLine("\nНичья\n");
                }
                else if (gladiator.Health > 0 && gladiator2.Health <= 0)
                {
                    Console.WriteLine("\nПобедил\n");
                    gladiator.DisplayInfo();
                }
                else if(gladiator2.Health > 0 &&gladiator.Health <= 0)
                {
                    Console.WriteLine("\nПобедил\n");
                    gladiator2.DisplayInfo();
                }
            }
        }
    }

    class Gladiator 
    {
        protected string _name;
        protected int _health;
        protected int _armor;
        protected int _damage;

        public int Health
        {
            get { return _health; } private set { _health = value; }
        }
        public int Damage
        {
            get { return _damage; } private set { _damage = value; }
        }

        public Gladiator()
        {
            _name = "Гладиатор";
            _health = 100;
            _armor = 10;
            _damage = 23;
        }

        public void OpenSecondWind()
        {
            int buffGLadiator = 35;
            _health += buffGLadiator;
        }

        public void TakeDamege(int damage)
        {
            _health -= damage;
        }

        public void DisplayInfo()
        {
            Console.WriteLine($"{_name} - {_health} - {_armor} - {_damage}");
        }

        public virtual void UseSpell()
        {
            OpenSecondWind();
        }
    }

    class Paladin: Gladiator
    {
        
        public Paladin() 
        {
            _name = "Паладин";
            _health = 125;
            _armor = 15;
            _damage = 15;
        }
        
        public void GodsHand()
        {
            int buffPaladin = 10;
            _damage += buffPaladin;
        }

        public override void UseSpell()
        {
            GodsHand();
        }
    }

    class Niga : Gladiator
    {
        public Niga()
        {
            _name = "Нига";
            _health = 25;
            _armor = 0;
            _damage = 15;
        }

        public void TakeAShot()
        {
            int buffNiga = 125;
            _damage += buffNiga;
        }

        public override void UseSpell()
        {
            TakeAShot();
        }

    }


    class Samurai : Gladiator
    {
        
        public Samurai()
        {
            _name = "Самурай";
            _health = 150;
            _damage = 25;
            _armor = 10;
        }

        public void GetKatana()
        {
            int buffSamurai = 35;
            _damage += buffSamurai;
        }

        public override void UseSpell()
        {
            GetKatana();
        }
    }

    class Barbarian : Gladiator
    {
        
        public Barbarian()
        {
            _name = "Варвар";
            _damage = 50;
            _armor = 0;
            _health = 150;
        }

        public void FallFury()
        {
            int buffBarbarian = 10;
            _armor = buffBarbarian;
        }

        public override void UseSpell()
        {
            FallFury();
        }
    }
}
